#!/bin/bash

dir="$HOME/.config/sway/dunst/icons"
steps=5

brightness=$(brightnessctl i | grep -oP '\(\K[^%\)]+')

send_notification () {

  if [ "$brightness" -lt "40" ]; then
    icon="$dir/moon.svg"
  elif [ "$brightness" -lt "60" ]; then
    icon="$dir/loader.svg"
  else
    icon="$dir/sun.svg"
  fi

  notify-send -i $icon "Brightness : $brightness%"
}

docs () {
  echo "Usage: brightness [Options]

  Options:
    up          increase the brightness at 5% and sends a notification
    down        decrease the brightness at 5% and sends a notification"
}

case $1 in
  up)
    brightnessctl set "${steps:-5}%+" -q
    send_notification
    ;;
  down)
    brightnessctl set "${steps:-5}%-" -q
    send_notification
    ;;
  *)
    docs
    ;;
esac